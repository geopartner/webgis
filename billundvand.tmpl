<!-- billund_header_table_logo.tmpl (v4 - Final) -->
<style>
  /* ===== Map / Page area ===== */
  body { background:#fff; }
  .leaflet-control-graphicscale { box-shadow:none; -webkit-box-shadow:none; white-space:nowrap; }

  #pane1{
    position:absolute;
    width:{{printWidth}};
    height:{{printHeight}};
    top:30px; left:30px;            /* page margins */
    overflow:hidden;
    border:1px solid #000;
  }
  #container1{
    position:relative;
    width:200%; height:200%;
    left:-50%; top:-50%;
    display:inline-block;
  }

  #legend{
    position:absolute; top:5px; left:5px;
    padding:10px; background:#fff;
    -webkit-transform:scale(0.6);
    -webkit-transform-origin:left top;
    display:{{_showLegend}};
  }
  #northimg{ position:absolute; top:10px; right:10px; }
  #scalebar{ position:absolute; left:4px; bottom:19px; }

  /* ===== Header anchored bottom-right ===== */
  #header {
    /* The "display: {{_showHeader}};" rule has been REMOVED to force the header to always be visible. */
    position: absolute;
    width: 600px;     /* EDIT ME: header width */
    height: 110px;    /* EDIT ME: header height */
    background-color: white;
    bottom: 0px;
    right: 0px;
  }

  /* ===== Table layout inside header ===== */
  :root{
    /* Column widths - adjust to match your design */
    --col-logo: 25%;   /* logo column */
    --col1: 25%;       /* Scale */
    --col2: 25%;       /* UTM32 */
    --col3: 25%;       /* DVR90 */

    /* Row heights */
    --hdr-top-row: 60%;
    --hdr-bot-row: 40%;

    /* Line thickness */
    --hdr-line: 1px;
  }

  #hdrTable{
    position:absolute; inset:0;
    width:100%; height:100%;
    border-collapse:collapse;
    table-layout:fixed;
    background:#fff; /* White background for the table cells */
  }

  #hdrTable td{
    border: var(--hdr-line) solid #000; /* Black borders */
    color:#000; /* Black text */
    font-family: Arial, Helvetica, sans-serif;
    padding: 4px 8px;
    vertical-align:middle;
    overflow:hidden; white-space:nowrap; text-overflow:ellipsis;
  }

  /* Specific styling for the merged logo cell */
  #logo-cell {
    vertical-align: middle;
    text-align: center;
  }

  /* Column widths */
  #hdrTable colgroup col.logo  { width: var(--col-logo); }
  #hdrTable colgroup col.c1    { width: var(--col1); }
  #hdrTable colgroup col.c2    { width: var(--col2); }
  #hdrTable colgroup col.c3    { width: var(--col3); }

  #hdrTable tr.top    { height: var(--hdr-top-row); }
  #hdrTable tr.bottom { height: var(--hdr-bot-row); }

  /* Title & Comment */
  #title{
    display:block;
    font-size:16px;
    font-weight:700;
    line-height:1.1;
    margin:0 0 4px 0;
    color:#000;
  }
  #comment{
    display:block;
    font-size:12px;
    font-weight:400;
    line-height:1.1;
    margin:0;
    color:#000;
  }

  /* Logo cell */
  #hdrLogo {
    display:block;
    width:100%;
    height:auto;
    max-height:80px; /* adjust to fit row height */
    object-fit:contain;
    padding: 5px;
    box-sizing: border-box;
  }
  
  /* Text in bottom-row cells */
  .label {
    display: block;
    font-size: 10px;
    font-weight: normal;
    color: #333; /* Dark gray for labels */
    margin-bottom: 2px;
  }
  
  #scale, #coord, #kote {
    display: block;
    font-size: 14px;
    font-weight: 700;
  }
  
  #date-time {
    position: absolute;
    bottom: 0;
    left: 0;
    background-color: white;
    font-size: 0.8em;
    padding: 2px;
  }
</style>

<div id="pane1">
  <div id="container1">
    <div id="map"></div>
  </div>

  <!-- ===== Header (table-based with logo column) ===== -->
  <div id="header" aria-label="Print header">
    <table id="hdrTable" role="presentation">
      <colgroup>
        <col class="logo"><col class="c1"><col class="c2"><col class="c3">
      </colgroup>

      <!-- Top row -->
      <tr class="top">
        <!-- Logo Cell: Spans 2 rows -->
        <td id="logo-cell" rowspan="2">
          <img id="hdrLogo" src="https://raw.githubusercontent.com/geopartner/webgis/master/logo/billundvand.png" alt="Logo">
        </td>
        <!-- Title/Comment Cell: Spans 3 columns -->
        <td colspan="3">
          <!-- A non-breaking space (&nbsp;) is added as a fallback to prevent cell collapse if no title/comment is provided. -->
          <b id="title">&nbsp;</b>
          <p id="comment">&nbsp;</p>
        </td>
      </tr>

      <!-- Bottom row: Contains only 3 cells now -->
      <tr class="bottom">
        <td>
          <span class="label">MÃ¥l:</span>
          <span id="scale"></span>
        </td>
        <td>
          <span class="label">Koordinatsystem:</span>
          <span id="coord">UTM32</span>
        </td>
        <td>
          <span class="label">Kotesystem:</span>
          <span id="kote">DVR90</span>
        </td>
      </tr>
    </table>
  </div>

  <!-- Other widgets -->
  <div id="northimg">
    <img style="width:30px" src="https://raw.githubusercontent.com/geopartner/webgis/master/logo/NorthArrow_02.svg">
  </div>
  <div id="legend"></div>
  <div id="date-time">Udskrevet {{printDataTime}}</div>
</div>